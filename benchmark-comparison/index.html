<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataFusion Bio-Formats Benchmark Comparison</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }

        /* Selection Panel Styles */
        .selection-panel {
            background-color: white;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .selection-panel h2 {
            margin: 0 0 15px 0;
            color: #333;
            font-size: 18px;
            font-weight: 600;
        }

        .selection-row {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .selection-row label {
            font-weight: 600;
            min-width: 80px;
            color: #495057;
        }

        .selection-row select {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        .selection-row select:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.25);
        }

        .vs-label {
            font-weight: 700;
            color: #6c757d;
            font-size: 18px;
            padding: 0 10px;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            font-weight: 500;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #545b62;
        }

        /* Header Styles */
        .header {
            background-color: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        h1 {
            margin: 0 0 10px 0;
            color: #333;
        }

        .subtitle {
            color: #666;
            font-size: 14px;
        }

        /* Runner Tabs - More Visible */
        .runner-tabs-wrapper {
            background-color: white;
            padding: 15px 20px 0 20px;
            margin-bottom: 0;
            border-radius: 8px 8px 0 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .runner-tabs {
            display: flex;
            gap: 10px;
            border-bottom: 2px solid #e9ecef;
        }

        .runner-tab {
            padding: 12px 24px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-bottom: none;
            border-radius: 6px 6px 0 0;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #495057;
            transition: all 0.2s;
            margin-bottom: -2px;
        }

        .runner-tab:hover {
            background: #e9ecef;
        }

        .runner-tab.active {
            background: white;
            color: #007bff;
            border-color: #007bff;
            border-bottom-color: white;
        }

        /* Chart Container Styles */
        .chart-container {
            background-color: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        h2 {
            margin-top: 0;
            color: #333;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }

        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }

        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }

        optgroup {
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="selection-panel">
        <h2>ðŸ“Š Select Datasets to Compare</h2>

        <div class="selection-row">
            <label for="baseline-select">Baseline:</label>
            <select id="baseline-select">
                <option value="">Loading...</option>
            </select>
        </div>

        <div class="selection-row">
            <span class="vs-label">vs</span>
        </div>

        <div class="selection-row">
            <label for="target-select">Target:</label>
            <select id="target-select">
                <option value="">Loading...</option>
            </select>
        </div>

        <div class="button-group">
            <button class="btn-primary" onclick="app.loadComparison()">Compare</button>
            <button class="btn-secondary" onclick="app.resetToDefault()">Reset to Default</button>
        </div>
    </div>

    <div id="runner-tabs-container"></div>
    <div id="charts-container"></div>

    <script>
        // Embedded data
        const DATA = {
  "index": {
    "datasets": [
      {
        "id": "benchmarking@099537d7c02b3defed13675896e65a817590d3cc@linux",
        "label": "benchmarking(099537d7)",
        "ref": "benchmarking",
        "ref_type": "branch",
        "timestamp": "2025-11-10T08:31:09Z",
        "runner": "linux",
        "runner_label": "Linux AMD64",
        "path": "commits/099537d7/linux",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc"
      },
      {
        "id": "benchmarking@099537d7c02b3defed13675896e65a817590d3cc@macos",
        "label": "benchmarking(099537d7)",
        "ref": "benchmarking",
        "ref_type": "branch",
        "timestamp": "2025-11-10T08:31:09Z",
        "runner": "macos",
        "runner_label": "macOS ARM64",
        "path": "commits/099537d7/macos",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc"
      },
      {
        "id": "benchmarking@7c33c0ccb81453dc72dad60caeb8296ea59c9f56@linux",
        "label": "benchmarking(7c33c0cc)",
        "ref": "benchmarking",
        "ref_type": "branch",
        "timestamp": "2025-11-10T07:48:35Z",
        "runner": "linux",
        "runner_label": "Linux AMD64",
        "path": "commits/7c33c0cc/linux",
        "commit_sha": "7c33c0ccb81453dc72dad60caeb8296ea59c9f56"
      },
      {
        "id": "benchmarking@7c33c0ccb81453dc72dad60caeb8296ea59c9f56@macos",
        "label": "benchmarking(7c33c0cc)",
        "ref": "benchmarking",
        "ref_type": "branch",
        "timestamp": "2025-11-10T07:48:35Z",
        "runner": "macos",
        "runner_label": "macOS ARM64",
        "path": "commits/7c33c0cc/macos",
        "commit_sha": "7c33c0ccb81453dc72dad60caeb8296ea59c9f56"
      },
      {
        "id": "benchmarking@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a@linux",
        "label": "benchmarking(b52d73a6)",
        "ref": "benchmarking",
        "ref_type": "branch",
        "timestamp": "2025-11-10T08:05:40Z",
        "runner": "linux",
        "runner_label": "Linux AMD64",
        "path": "commits/b52d73a6/linux",
        "commit_sha": "b52d73a607e2d209f4e153a5748fdf83d7cc0f9a"
      },
      {
        "id": "benchmarking@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a@macos",
        "label": "benchmarking(b52d73a6)",
        "ref": "benchmarking",
        "ref_type": "branch",
        "timestamp": "2025-11-10T08:05:40Z",
        "runner": "macos",
        "runner_label": "macOS ARM64",
        "path": "commits/b52d73a6/macos",
        "commit_sha": "b52d73a607e2d209f4e153a5748fdf83d7cc0f9a"
      },
      {
        "id": "benchmarking@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@linux",
        "label": "benchmarking(b9d1cffb)",
        "ref": "benchmarking",
        "ref_type": "branch",
        "timestamp": "2025-11-10T07:46:01Z",
        "runner": "linux",
        "runner_label": "Linux AMD64",
        "path": "commits/b9d1cffb/linux",
        "commit_sha": "b9d1cffb855377ccab2cfe8d580ebd7215da36dd"
      },
      {
        "id": "benchmarking@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@macos",
        "label": "benchmarking(b9d1cffb)",
        "ref": "benchmarking",
        "ref_type": "branch",
        "timestamp": "2025-11-10T07:46:01Z",
        "runner": "macos",
        "runner_label": "macOS ARM64",
        "path": "commits/b9d1cffb/macos",
        "commit_sha": "b9d1cffb855377ccab2cfe8d580ebd7215da36dd"
      },
      {
        "id": "v0.1.1@099537d7c02b3defed13675896e65a817590d3cc@linux",
        "label": "v0.1.1",
        "ref": "v0.1.1",
        "ref_type": "tag",
        "timestamp": "2025-11-10T08:31:09Z",
        "runner": "linux",
        "runner_label": "Linux AMD64",
        "path": "tags/v0.1.1/linux",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc",
        "is_latest_tag": false
      },
      {
        "id": "v0.1.1@099537d7c02b3defed13675896e65a817590d3cc@macos",
        "label": "v0.1.1",
        "ref": "v0.1.1",
        "ref_type": "tag",
        "timestamp": "2025-11-10T08:31:09Z",
        "runner": "macos",
        "runner_label": "macOS ARM64",
        "path": "tags/v0.1.1/macos",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc",
        "is_latest_tag": false
      },
      {
        "id": "v0.1.1@7c33c0ccb81453dc72dad60caeb8296ea59c9f56@linux",
        "label": "v0.1.1",
        "ref": "v0.1.1",
        "ref_type": "tag",
        "timestamp": "2025-11-10T07:48:35Z",
        "runner": "linux",
        "runner_label": "Linux AMD64",
        "path": "tags/v0.1.1/linux",
        "commit_sha": "7c33c0ccb81453dc72dad60caeb8296ea59c9f56",
        "is_latest_tag": false
      },
      {
        "id": "v0.1.1@7c33c0ccb81453dc72dad60caeb8296ea59c9f56@macos",
        "label": "v0.1.1",
        "ref": "v0.1.1",
        "ref_type": "tag",
        "timestamp": "2025-11-10T07:48:35Z",
        "runner": "macos",
        "runner_label": "macOS ARM64",
        "path": "tags/v0.1.1/macos",
        "commit_sha": "7c33c0ccb81453dc72dad60caeb8296ea59c9f56",
        "is_latest_tag": false
      },
      {
        "id": "v0.1.1@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a@linux",
        "label": "v0.1.1",
        "ref": "v0.1.1",
        "ref_type": "tag",
        "timestamp": "2025-11-10T08:05:40Z",
        "runner": "linux",
        "runner_label": "Linux AMD64",
        "path": "tags/v0.1.1/linux",
        "commit_sha": "b52d73a607e2d209f4e153a5748fdf83d7cc0f9a",
        "is_latest_tag": false
      },
      {
        "id": "v0.1.1@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a@macos",
        "label": "v0.1.1",
        "ref": "v0.1.1",
        "ref_type": "tag",
        "timestamp": "2025-11-10T08:05:40Z",
        "runner": "macos",
        "runner_label": "macOS ARM64",
        "path": "tags/v0.1.1/macos",
        "commit_sha": "b52d73a607e2d209f4e153a5748fdf83d7cc0f9a",
        "is_latest_tag": false
      },
      {
        "id": "v0.1.1@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@linux",
        "label": "v0.1.1",
        "ref": "v0.1.1",
        "ref_type": "tag",
        "timestamp": "2025-11-10T07:46:01Z",
        "runner": "linux",
        "runner_label": "Linux AMD64",
        "path": "tags/v0.1.1/linux",
        "commit_sha": "b9d1cffb855377ccab2cfe8d580ebd7215da36dd",
        "is_latest_tag": false
      },
      {
        "id": "v0.1.1@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@macos",
        "label": "v0.1.1",
        "ref": "v0.1.1",
        "ref_type": "tag",
        "timestamp": "2025-11-10T07:46:01Z",
        "runner": "macos",
        "runner_label": "macOS ARM64",
        "path": "tags/v0.1.1/macos",
        "commit_sha": "b9d1cffb855377ccab2cfe8d580ebd7215da36dd",
        "is_latest_tag": false
      }
    ],
    "tags": [
      "v0.1.1"
    ],
    "last_updated": "2025-11-10T08:31:09Z"
  },
  "datasets": {
    "benchmarking@099537d7c02b3defed13675896e65a817590d3cc@linux": {
      "id": "benchmarking@099537d7c02b3defed13675896e65a817590d3cc@linux",
      "label": "benchmarking(099537d7)",
      "ref": "benchmarking",
      "runner": "linux",
      "runner_label": "Linux AMD64",
      "metadata": {
        "ref": "benchmarking",
        "ref_type": "branch",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc",
        "timestamp": "2025-11-10T08:31:01Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "benchmarking@099537d7c02b3defed13675896e65a817590d3cc@macos": {
      "id": "benchmarking@099537d7c02b3defed13675896e65a817590d3cc@macos",
      "label": "benchmarking(099537d7)",
      "ref": "benchmarking",
      "runner": "macos",
      "runner_label": "macOS ARM64",
      "metadata": {
        "ref": "benchmarking",
        "ref_type": "branch",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc",
        "timestamp": "2025-11-10T08:31:01Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "benchmarking@7c33c0ccb81453dc72dad60caeb8296ea59c9f56@linux": {
      "id": "benchmarking@7c33c0ccb81453dc72dad60caeb8296ea59c9f56@linux",
      "label": "benchmarking(7c33c0cc)",
      "ref": "benchmarking",
      "runner": "linux",
      "runner_label": "Linux AMD64",
      "metadata": {
        "ref": "benchmarking",
        "ref_type": "branch",
        "commit_sha": "7c33c0ccb81453dc72dad60caeb8296ea59c9f56",
        "timestamp": "2025-11-10T07:48:25Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "benchmarking@7c33c0ccb81453dc72dad60caeb8296ea59c9f56@macos": {
      "id": "benchmarking@7c33c0ccb81453dc72dad60caeb8296ea59c9f56@macos",
      "label": "benchmarking(7c33c0cc)",
      "ref": "benchmarking",
      "runner": "macos",
      "runner_label": "macOS ARM64",
      "metadata": {
        "ref": "benchmarking",
        "ref_type": "branch",
        "commit_sha": "7c33c0ccb81453dc72dad60caeb8296ea59c9f56",
        "timestamp": "2025-11-10T07:48:25Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "benchmarking@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a@linux": {
      "id": "benchmarking@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a@linux",
      "label": "benchmarking(b52d73a6)",
      "ref": "benchmarking",
      "runner": "linux",
      "runner_label": "Linux AMD64",
      "metadata": {
        "ref": "benchmarking",
        "ref_type": "branch",
        "commit_sha": "b52d73a607e2d209f4e153a5748fdf83d7cc0f9a",
        "timestamp": "2025-11-10T08:05:30Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "benchmarking@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a@macos": {
      "id": "benchmarking@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a@macos",
      "label": "benchmarking(b52d73a6)",
      "ref": "benchmarking",
      "runner": "macos",
      "runner_label": "macOS ARM64",
      "metadata": {
        "ref": "benchmarking",
        "ref_type": "branch",
        "commit_sha": "b52d73a607e2d209f4e153a5748fdf83d7cc0f9a",
        "timestamp": "2025-11-10T08:05:30Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "benchmarking@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@linux": {
      "id": "benchmarking@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@linux",
      "label": "benchmarking(b9d1cffb)",
      "ref": "benchmarking",
      "runner": "linux",
      "runner_label": "Linux AMD64",
      "metadata": {
        "ref": "benchmarking",
        "ref_type": "branch",
        "commit_sha": "b9d1cffb855377ccab2cfe8d580ebd7215da36dd",
        "timestamp": "2025-11-10T07:45:53Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "benchmarking@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@macos": {
      "id": "benchmarking@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@macos",
      "label": "benchmarking(b9d1cffb)",
      "ref": "benchmarking",
      "runner": "macos",
      "runner_label": "macOS ARM64",
      "metadata": {
        "ref": "benchmarking",
        "ref_type": "branch",
        "commit_sha": "b9d1cffb855377ccab2cfe8d580ebd7215da36dd",
        "timestamp": "2025-11-10T07:45:53Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "v0.1.1@099537d7c02b3defed13675896e65a817590d3cc@linux": {
      "id": "v0.1.1@099537d7c02b3defed13675896e65a817590d3cc@linux",
      "label": "v0.1.1",
      "ref": "v0.1.1",
      "runner": "linux",
      "runner_label": "Linux AMD64",
      "metadata": {
        "ref": "v0.1.1",
        "ref_type": "tag",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc",
        "timestamp": "2025-11-10T08:31:01Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "v0.1.1@099537d7c02b3defed13675896e65a817590d3cc@macos": {
      "id": "v0.1.1@099537d7c02b3defed13675896e65a817590d3cc@macos",
      "label": "v0.1.1",
      "ref": "v0.1.1",
      "runner": "macos",
      "runner_label": "macOS ARM64",
      "metadata": {
        "ref": "v0.1.1",
        "ref_type": "tag",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc",
        "timestamp": "2025-11-10T08:31:01Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "v0.1.1@7c33c0ccb81453dc72dad60caeb8296ea59c9f56@linux": {
      "id": "v0.1.1@7c33c0ccb81453dc72dad60caeb8296ea59c9f56@linux",
      "label": "v0.1.1",
      "ref": "v0.1.1",
      "runner": "linux",
      "runner_label": "Linux AMD64",
      "metadata": {
        "ref": "v0.1.1",
        "ref_type": "tag",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc",
        "timestamp": "2025-11-10T08:31:01Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "v0.1.1@7c33c0ccb81453dc72dad60caeb8296ea59c9f56@macos": {
      "id": "v0.1.1@7c33c0ccb81453dc72dad60caeb8296ea59c9f56@macos",
      "label": "v0.1.1",
      "ref": "v0.1.1",
      "runner": "macos",
      "runner_label": "macOS ARM64",
      "metadata": {
        "ref": "v0.1.1",
        "ref_type": "tag",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc",
        "timestamp": "2025-11-10T08:31:01Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "v0.1.1@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a@linux": {
      "id": "v0.1.1@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a@linux",
      "label": "v0.1.1",
      "ref": "v0.1.1",
      "runner": "linux",
      "runner_label": "Linux AMD64",
      "metadata": {
        "ref": "v0.1.1",
        "ref_type": "tag",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc",
        "timestamp": "2025-11-10T08:31:01Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "v0.1.1@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a@macos": {
      "id": "v0.1.1@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a@macos",
      "label": "v0.1.1",
      "ref": "v0.1.1",
      "runner": "macos",
      "runner_label": "macOS ARM64",
      "metadata": {
        "ref": "v0.1.1",
        "ref_type": "tag",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc",
        "timestamp": "2025-11-10T08:31:01Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "v0.1.1@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@linux": {
      "id": "v0.1.1@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@linux",
      "label": "v0.1.1",
      "ref": "v0.1.1",
      "runner": "linux",
      "runner_label": "Linux AMD64",
      "metadata": {
        "ref": "v0.1.1",
        "ref_type": "tag",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc",
        "timestamp": "2025-11-10T08:31:01Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    },
    "v0.1.1@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@macos": {
      "id": "v0.1.1@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@macos",
      "label": "v0.1.1",
      "ref": "v0.1.1",
      "runner": "macos",
      "runner_label": "macOS ARM64",
      "metadata": {
        "ref": "v0.1.1",
        "ref_type": "tag",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc",
        "timestamp": "2025-11-10T08:31:01Z",
        "benchmark_mode": "fast"
      },
      "results": {}
    }
  },
  "refs_by_type": {
    "tag": {
      "v0.1.1": {
        "label": "v0.1.1",
        "ref": "v0.1.1",
        "ref_type": "tag",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc",
        "is_latest_tag": false,
        "runners": {
          "linux": "v0.1.1@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@linux",
          "macos": "v0.1.1@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@macos"
        }
      }
    },
    "branch": {
      "benchmarking@099537d7c02b3defed13675896e65a817590d3cc": {
        "label": "benchmarking(099537d7)",
        "ref": "benchmarking",
        "ref_type": "branch",
        "commit_sha": "099537d7c02b3defed13675896e65a817590d3cc",
        "is_latest_tag": false,
        "runners": {
          "linux": "benchmarking@099537d7c02b3defed13675896e65a817590d3cc@linux",
          "macos": "benchmarking@099537d7c02b3defed13675896e65a817590d3cc@macos"
        }
      },
      "benchmarking@7c33c0ccb81453dc72dad60caeb8296ea59c9f56": {
        "label": "benchmarking(7c33c0cc)",
        "ref": "benchmarking",
        "ref_type": "branch",
        "commit_sha": "7c33c0ccb81453dc72dad60caeb8296ea59c9f56",
        "is_latest_tag": false,
        "runners": {
          "linux": "benchmarking@7c33c0ccb81453dc72dad60caeb8296ea59c9f56@linux",
          "macos": "benchmarking@7c33c0ccb81453dc72dad60caeb8296ea59c9f56@macos"
        }
      },
      "benchmarking@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a": {
        "label": "benchmarking(b52d73a6)",
        "ref": "benchmarking",
        "ref_type": "branch",
        "commit_sha": "b52d73a607e2d209f4e153a5748fdf83d7cc0f9a",
        "is_latest_tag": false,
        "runners": {
          "linux": "benchmarking@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a@linux",
          "macos": "benchmarking@b52d73a607e2d209f4e153a5748fdf83d7cc0f9a@macos"
        }
      },
      "benchmarking@b9d1cffb855377ccab2cfe8d580ebd7215da36dd": {
        "label": "benchmarking(b9d1cffb)",
        "ref": "benchmarking",
        "ref_type": "branch",
        "commit_sha": "b9d1cffb855377ccab2cfe8d580ebd7215da36dd",
        "is_latest_tag": false,
        "runners": {
          "linux": "benchmarking@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@linux",
          "macos": "benchmarking@b9d1cffb855377ccab2cfe8d580ebd7215da36dd@macos"
        }
      }
    }
  }
};

        // Application state
        const app = {
            currentBaseline: null,  // unique key (ref or ref@sha)
            currentTarget: null,    // unique key (ref or ref@sha)
            currentRunner: null,
            availableRunners: [],

            init() {
                this.populateDropdowns();
                this.setDefaults();
            },

            populateDropdowns() {
                const baselineSelect = document.getElementById('baseline-select');
                const targetSelect = document.getElementById('target-select');

                baselineSelect.innerHTML = '';
                targetSelect.innerHTML = '';

                // Safety check for refs_by_type
                if (!DATA.refs_by_type) {
                    console.error('DATA.refs_by_type is not defined');
                    return;
                }

                // Tags
                const tags = DATA.refs_by_type.tag ? Object.entries(DATA.refs_by_type.tag).map(([key, data]) => ({
                    key: key,
                    ...data
                })) : [];

                if (tags.length > 0) {
                    const tagGroup = document.createElement('optgroup');
                    tagGroup.label = 'Tags';

                    tags.forEach(ref => {
                        const option = document.createElement('option');
                        option.value = ref.key;
                        option.textContent = ref.label + (ref.is_latest_tag ? ' â­ Latest' : '');
                        tagGroup.appendChild(option);
                    });

                    baselineSelect.appendChild(tagGroup.cloneNode(true));
                    targetSelect.appendChild(tagGroup.cloneNode(true));
                }

                // Branches (each commit gets a separate entry)
                const branches = DATA.refs_by_type.branch ? Object.entries(DATA.refs_by_type.branch).map(([key, data]) => ({
                    key: key,
                    ...data
                })) : [];

                if (branches.length > 0) {
                    const branchGroup = document.createElement('optgroup');
                    branchGroup.label = 'Branches/Commits';

                    branches.forEach(ref => {
                        const option = document.createElement('option');
                        option.value = ref.key;  // Use unique key (ref@sha)
                        option.textContent = ref.label;  // Display with commit SHA
                        branchGroup.appendChild(option);
                    });

                    baselineSelect.appendChild(branchGroup.cloneNode(true));
                    targetSelect.appendChild(branchGroup.cloneNode(true));
                }
            },

            setDefaults() {
                // Find latest tag
                const latestTagEntry = DATA.refs_by_type.tag ?
                    Object.entries(DATA.refs_by_type.tag).find(([key, ref]) => ref.is_latest_tag) : null;

                // Find first branch (most recent commit)
                const firstBranchEntry = DATA.refs_by_type.branch ?
                    Object.entries(DATA.refs_by_type.branch)[0] : null;
                const targetEntry = firstBranchEntry ||
                    (DATA.refs_by_type.tag ? Object.entries(DATA.refs_by_type.tag)[0] : null);

                if (latestTagEntry) {
                    const [tagKey, tagData] = latestTagEntry;
                    document.getElementById('baseline-select').value = tagKey;
                    this.currentBaseline = tagKey;
                }

                if (targetEntry) {
                    const [targetKey, targetData] = targetEntry;
                    document.getElementById('target-select').value = targetKey;
                    this.currentTarget = targetKey;
                }

                // Auto-load comparison if both are set
                if (this.currentBaseline && this.currentTarget) {
                    this.loadComparison();
                }
            },

            resetToDefault() {
                this.setDefaults();
                this.loadComparison();
            },

            getRefData(refKey) {
                // Find ref in tags or branches using unique key
                return DATA.refs_by_type.tag[refKey] || DATA.refs_by_type.branch[refKey];
            },

            loadComparison() {
                const baselineRef = document.getElementById('baseline-select').value;
                const targetRef = document.getElementById('target-select').value;

                if (!baselineRef || !targetRef) {
                    alert('Please select both baseline and target datasets');
                    return;
                }

                if (baselineRef === targetRef) {
                    alert('Please select different datasets for comparison');
                    return;
                }

                this.currentBaseline = baselineRef;
                this.currentTarget = targetRef;

                const baselineRefData = this.getRefData(baselineRef);
                const targetRefData = this.getRefData(targetRef);

                if (!baselineRefData || !targetRefData) {
                    document.getElementById('charts-container').innerHTML =
                        '<div class="error">Error: Could not load dataset data</div>';
                    return;
                }

                // Find common runners
                const baselineRunners = Object.keys(baselineRefData.runners);
                const targetRunners = Object.keys(targetRefData.runners);
                const commonRunners = baselineRunners.filter(r => targetRunners.includes(r));

                if (commonRunners.length === 0) {
                    document.getElementById('charts-container').innerHTML =
                        '<div class="error">Error: No common runners between selected datasets</div>';
                    return;
                }

                this.availableRunners = commonRunners;

                // Setup runner tabs
                this.setupRunnerTabs();

                // Generate charts for first runner
                this.currentRunner = commonRunners[0];
                this.generateCharts();
            },

            setupRunnerTabs() {
                const tabsContainer = document.getElementById('runner-tabs-container');

                if (this.availableRunners.length === 1) {
                    // Single runner - show simple label
                    const runner = this.availableRunners[0];
                    const baselineRefData = this.getRefData(this.currentBaseline);
                    const datasetId = baselineRefData.runners[runner];
                    const dataset = DATA.datasets[datasetId];

                    tabsContainer.innerHTML = `
                        <div class="runner-tabs-wrapper">
                            <div class="runner-tabs">
                                <div class="runner-tab active">
                                    ${dataset.runner_label}
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    // Multiple runners - show clickable tabs
                    const tabs = this.availableRunners.map((runner, idx) => {
                        const baselineRefData = this.getRefData(this.currentBaseline);
                        const datasetId = baselineRefData.runners[runner];
                        const dataset = DATA.datasets[datasetId];
                        const active = idx === 0 ? 'active' : '';

                        return `<button class="runner-tab ${active}" onclick="app.switchRunner('${runner}')">
                            ${dataset.runner_label}
                        </button>`;
                    }).join('');

                    tabsContainer.innerHTML = `
                        <div class="runner-tabs-wrapper">
                            <div class="runner-tabs">
                                ${tabs}
                            </div>
                        </div>
                    `;
                }
            },

            switchRunner(runner) {
                this.currentRunner = runner;

                // Update active tab
                document.querySelectorAll('.runner-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                event.target.classList.add('active');

                // Regenerate charts
                this.generateCharts();
            },

            generateCharts() {
                const container = document.getElementById('charts-container');
                const timestamp = new Date().toISOString().replace('T', ' ').substring(0, 19) + ' UTC';

                // Get datasets for current runner
                const baselineRefData = this.getRefData(this.currentBaseline);
                const targetRefData = this.getRefData(this.currentTarget);

                const baselineDatasetId = baselineRefData.runners[this.currentRunner];
                const targetDatasetId = targetRefData.runners[this.currentRunner];

                const baseline = DATA.datasets[baselineDatasetId];
                const target = DATA.datasets[targetDatasetId];

                if (!baseline || !target) {
                    container.innerHTML = `
                        <div class="error">
                            <strong>Error: Dataset not found</strong><br>
                            Baseline ID: ${baselineDatasetId}<br>
                            Target ID: ${targetDatasetId}
                        </div>
                    `;
                    return;
                }

                // Generate header
                let html = `
                    <div class="header">
                        <h1>DataFusion Bio-Formats Benchmark Comparison</h1>
                        <div class="subtitle">
                            <strong>Baseline:</strong> ${baseline.label} &nbsp;|&nbsp;
                            <strong>Target:</strong> ${target.label} &nbsp;|&nbsp;
                            <strong>Platform:</strong> ${baseline.runner_label} &nbsp;|&nbsp;
                            <strong>Generated:</strong> ${timestamp}
                        </div>
                    </div>
                `;

                // TODO: Add actual benchmark charts when result parsing is implemented
                html += `
                    <div class="info">
                        <h3>Benchmark data loaded successfully</h3>
                        <p><strong>Baseline:</strong> ${baseline.label} (${baseline.ref})</p>
                        <p><strong>Target:</strong> ${target.label} (${target.ref})</p>
                        <p><strong>Platform:</strong> ${baseline.runner_label}</p>
                        <br>
                        <p><em>Chart generation will be implemented when benchmark result files are available.</em></p>
                        <p><em>The framework is ready - we just need to parse the actual benchmark JSON/CSV files.</em></p>
                    </div>
                `;

                container.innerHTML = html;
            }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            app.init();
        });
    </script>
</body>
</html>
